<!DOCTYPE html>
<html lang="pl" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rodzinka Furaska Vexa</title>
  <meta name="description" content="Witamy w rodzince Furaska Vexa â€” rozgoÅ›Ä‡ siÄ™ i sprawdÅº co dla Ciebie przygotowaliÅ›my." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --gradient-speed: 10s;

      /* Jasny motyw (domyÅ›lny) */
      --bg-a: #b38aff;
      --bg-b: #ffffff;

      --text: #201838;
      --muted: #5b4b86;
      --accent: #7e5cff;
      --accent-strong: #613eff;

      --card-bg: rgba(255,255,255,0.6);
      --card-border: rgba(126, 92, 255, 0.28);

      --hr-color: rgba(126,92,255,0.55);

      /* Przyciski */
      --btn-bg: rgba(126, 92, 255, 0.08);
      --btn-border: rgba(126, 92, 255, 0.36);
      --btn-bg-hover: rgba(126, 92, 255, 0.16);
      --btn-border-hover: rgba(126, 92, 255, 0.65);
      --btn-shadow: 0 8px 22px rgba(0,0,0,0.08);
      --btn-shadow-hover: 0 12px 28px rgba(0,0,0,0.12), 0 0 24px rgba(126,92,255,0.18);

      /* Pola formularza (jasny) */
      --input-bg: rgba(126, 92, 255, 0.08);
      --input-border: rgba(126, 92, 255, 0.36);
      --input-focus: rgba(126, 92, 255, 0.65);

      /* Media (wideo) */
      --video-border: rgba(126, 92, 255, 0.22);
      --video-shadow: 0 10px 30px rgba(0,0,0,0.12), 0 0 22px rgba(126,92,255,0.12);
      --video-bg: #ffffff;

      /* Brand colors */
      --yt: #ff1f4a;
      --discord: #5865F2;
      --instagram: #E4405F;

      /* Serca (przyciemnione) */
      --heart-opacity: 0.31; /* jasny motyw */
    }

    html[data-theme="dark"] {
      --bg-a: #281457;
      --bg-b: #3d1a77;
      --bg-c: #a100ff;

      --text: #eadfff;
      --muted: #cbb5ff;
      --accent: #d7b6ff;
      --accent-strong: #b985ff;

      --card-bg: rgba(255,255,255,0.05);
      --card-border: rgba(220,180,255,0.18);

      --hr-color: rgba(215,182,255,0.60);

      --btn-bg: rgba(215,182,255,0.06);
      --btn-border: rgba(215,182,255,0.42);
      --btn-bg-hover: rgba(215,182,255,0.12);
      --btn-border-hover: rgba(215,182,255,0.70);
      --btn-shadow: 0 8px 22px rgba(0,0,0,0.28);
      --btn-shadow-hover: 0 12px 28px rgba(0,0,0,0.35), 0 0 24px rgba(185,133,255,0.24);

      --input-bg: rgba(215,182,255,0.06);
      --input-border: rgba(215,182,255,0.42);
      --input-focus: rgba(215,182,255,0.70);

      --video-border: rgba(215,182,255,0.22);
      --video-shadow: 0 10px 30px rgba(0,0,0,0.35), 0 0 22px rgba(185,133,255,0.16);
      --video-bg: #000000;

      --heart-opacity: 0.26; /* ciemny motyw */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      position: relative;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);

      /* Jasny: 50/50 (miÄ™kkie przejÅ›cie 45â€“55%) */
      background-image: linear-gradient(135deg,
        var(--bg-a) 0%,
        var(--bg-a) 45%,
        var(--bg-b) 55%,
        var(--bg-b) 100%
      );
      background-size: 300% 300%;
      background-attachment: fixed;
      animation: bgGradient var(--gradient-speed) ease-in-out infinite;

      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Ciemny: 3-kolorowy z neonem */
    html[data-theme="dark"] body {
      background-image: linear-gradient(135deg,
        var(--bg-a) 0%,
        var(--bg-b) 58%,
        var(--bg-c) 100%
      );
    }

    /* Delikatne przyciemnienie centrum w dark mode (czytelnoÅ›Ä‡) */
    html[data-theme="dark"] body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: 0; /* pod sercami i treÅ›ciÄ… */
      pointer-events: none;
      background: radial-gradient(ellipse at 50% 35%,
        rgba(0,0,0,0.22),
        transparent 60%
      );
    }

    @keyframes bgGradient {
      0%   { background-position: 0% 0%; }
      50%  { background-position: 100% 100%; }
      100% { background-position: 0% 0%; }
    }

    @media (prefers-reduced-motion: reduce) {
      body { animation: none; }
      .bg-hearts svg { animation: none !important; opacity: 0.08 !important; }
    }

    /* LatajÄ…ce czarne serca w tle (pod treÅ›ciÄ…) */
    .bg-hearts {
      position: fixed;
      inset: 0;
      z-index: 1; /* pod .container (ktÃ³ry ma z-index:2) */
      pointer-events: none;
      overflow: hidden;
    }
    .bg-hearts svg {
      position: absolute;
      top: 0;
      left: var(--x, 50%);
      width: var(--size, 32px);
      height: var(--size, 32px);
      fill: rgba(0,0,0,var(--heart-opacity));
      filter: drop-shadow(0 2px 6px rgba(0,0,0,0.18));
      transform: translate(-50%, 110vh) scale(var(--scale, 1)) rotate(0turn);
      animation: floatUp var(--dur, 28s) linear infinite var(--delay, 0s);
    }
    @keyframes floatUp {
      0%   { transform: translate(-50%, 110vh) scale(var(--scale, 1)) rotate(0turn); }
      100% { transform: translate(-50%, -120vh) scale(var(--scale, 1)) rotate(0.2turn); }
    }

    .container {
      position: relative;
      z-index: 2; /* nad sercami */
      max-width: 980px;
      margin: 0 auto;
      padding: 24px;
    }

    header {
      padding: 44px 0 8px;
      text-align: center;
    }
    h1 {
      font-size: clamp(32px, 7vw, 72px);
      margin: 0 0 8px;
      line-height: 1.1;
      letter-spacing: 1px;
      color: var(--accent);
      text-shadow:
        0 0 16px rgba(126, 92, 255, 0.28),
        0 2px 10px rgba(0,0,0,0.06);
    }

    .fancy-intro {
      margin: 2px auto 6px;
      max-width: 920px;
      font-size: clamp(16px, 3.2vw, 24px);
      font-weight: 600;
      color: var(--muted);
      letter-spacing: .3px;
      text-shadow:
        0 0 12px rgba(126,92,255,0.18),
        0 2px 8px rgba(0,0,0,0.06);
    }

    .subtitle {
      font-weight: 600;
      color: var(--muted);
      opacity: 0.95;
    }

    .card {
      margin: 24px auto;
      padding: 24px 22px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      box-shadow:
        0 8px 24px rgba(0,0,0,0.10),
        0 0 22px rgba(126,92,255,0.10);
    }
    .content p { margin: 0 0 12px; font-size: clamp(16px, 2.3vw, 20px); }

    .info {
      margin-top: 12px;
      padding-top: 8px;
      border-top: 1px dashed rgba(126,92,255,0.25);
      color: var(--muted);
    }

    /* Dodatkowa ramka z informacjami + ikony + progress */
    .updates h2 {
      margin: 0 0 12px;
      font-size: clamp(18px, 2.6vw, 22px);
      color: var(--accent-strong);
      text-shadow: 0 0 12px rgba(126,92,255,0.14);
    }

    .updates .goal .row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .updates .goal .label strong { color: var(--accent-strong); }
    .updates .goal .value {
      font-weight: 800;
      color: var(--accent-strong);
      white-space: nowrap;
    }
    .updates .progress {
      position: relative;
      height: 10px;
      border-radius: 999px;
      overflow: hidden;
      background: rgba(126, 92, 255, 0.18);
      border: 1px solid rgba(126, 92, 255, 0.35);
    }
    .updates .progress .bar {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent) 0%, var(--accent-strong) 100%);
      border-radius: 999px;
      box-shadow: 0 0 12px rgba(126,92,255,0.35);
      transition: width .6s ease;
    }

    .updates ul {
      list-style: none;
      padding: 10px 0 0;
      margin: 0;
      display: grid;
      gap: 8px;
    }
    .updates li {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .updates .icon {
      display: inline-flex;
      width: 20px;
      height: 20px;
      color: var(--muted);
      flex: 0 0 20px;
    }
    .updates .icon svg { width: 20px; height: 20px; display: block; }
    .updates .icon.youtube { color: var(--yt); }
    .updates .icon.discord { color: var(--discord); }
    .updates .icon.instagram { color: var(--instagram); }
    .updates .icon.info { color: var(--accent-strong); }

    /* Przyciski (uniwersalne a/button) */
    .btn {
      display: inline-block;
      margin-top: 12px;
      padding: 12px 18px;
      border-radius: 999px;
      background: var(--btn-bg);
      border: 1px solid var(--btn-border);
      color: var(--accent-strong);
      font-weight: 700;
      text-decoration: none;
      box-shadow: var(--btn-shadow);
      transition: transform .15s ease,
                  background-color .2s ease,
                  box-shadow .2s ease,
                  border-color .2s ease,
                  color .2s ease;
      cursor: pointer;
    }
    .btn:hover {
      transform: translateY(-1px);
      background: var(--btn-bg-hover);
      border-color: var(--btn-border-hover);
      box-shadow: var(--btn-shadow-hover);
      color: var(--accent-strong);
    }
    .btn[disabled] {
      opacity: .6;
      cursor: not-allowed;
      transform: none;
      filter: grayscale(.1);
    }
    a.btn.social-btn { display: inline-flex; align-items: center; gap: 10px; }
    a.btn.social-btn svg { width: 20px; height: 20px; }

    .btn--youtube {
      background: rgba(255, 31, 74, 0.10);
      border-color: rgba(255, 31, 74, 0.55);
      color: #d6284e;
      box-shadow:
        inset 0 0 0 1px rgba(255, 31, 74, 0.12),
        0 8px 22px rgba(0,0,0,0.08);
    }
    .btn--youtube:hover {
      background: rgba(255, 31, 74, 0.18);
      border-color: rgba(255, 31, 74, 0.85);
      color: #a31536;
      box-shadow:
        inset 0 0 0 1px rgba(255, 31, 74, 0.18),
        0 12px 28px rgba(0,0,0,0.12),
        0 0 24px rgba(255, 50, 90, 0.22);
    }

    /* Sekcja komentarzy */
    .comments {
      margin-top: 24px;
    }
    .comments h2 {
      margin: 0 0 12px;
      font-size: clamp(18px, 2.6vw, 22px);
      color: var(--accent-strong);
      text-shadow: 0 0 12px rgba(126,92,255,0.14);
    }
    .comments .helper {
      margin: 0 0 12px;
      color: var(--muted);
      font-size: 0.95rem;
      opacity: 0.9;
    }

    .comments-form {
      display: grid;
      gap: 12px;
      margin-bottom: 16px;
    }
    .comments-form .row {
      display: grid;
      gap: 12px;
    }
    @media (min-width: 640px) {
      .comments-form .row {
        grid-template-columns: 1fr 2fr;
      }
    }
    .field label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: var(--muted);
    }
    .field input[type="text"],
    .field textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text);
      font: inherit;
      resize: vertical;
      min-height: 44px;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .field textarea { min-height: 100px; }
    .field input::placeholder,
    .field textarea::placeholder { color: var(--muted); opacity: .8; }
    .field input:focus,
    .field textarea:focus {
      border-color: var(--input-focus);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--input-focus) 25%, transparent);
    }

    .counter {
      text-align: right;
      font-size: .9rem;
      color: var(--muted);
      margin-top: -6px;
    }

    .comments-toolbar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      margin: 6px 0 12px;
      flex-wrap: wrap;
    }
    .comments-toolbar label {
      color: var(--muted);
      font-weight: 600;
    }
    .comments-toolbar select {
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text);
      font: inherit;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .comments-toolbar select:focus {
      border-color: var(--input-focus);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--input-focus) 25%, transparent);
    }

    .comment-msg {
      min-height: 20px;
      color: var(--muted);
      font-weight: 600;
    }

    .comments-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 12px;
    }
    .comment {
      padding: 12px 14px;
      border: 1px solid var(--card-border);
      border-radius: 12px;
      background: color-mix(in srgb, var(--card-bg), transparent 20%);
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    }
    .comment-head {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .left-head {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }
    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.9rem;
      color: #fff;
      border: 1px solid var(--card-border);
      box-shadow: 0 4px 12px rgba(0,0,0,0.10);
      user-select: none;
      flex: 0 0 36px;
    }
    .meta {
      display: inline-flex;
      align-items: baseline;
      gap: 10px;
      min-width: 0;
    }
    .comment .nick {
      font-weight: 800;
      color: var(--accent-strong);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 40vw;
    }
    .comment time {
      font-size: 0.85rem;
      color: var(--muted);
      opacity: 0.9;
    }
    .badge-edited {
      font-size: 0.78rem;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px dashed var(--card-border);
      color: var(--muted);
      background: color-mix(in srgb, var(--card-bg), transparent 30%);
    }

    .comment-actions {
      display: inline-flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .action-btn {
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.06);
      border: 1px solid rgba(126, 92, 255, 0.35);
      color: var(--accent-strong);
      font-weight: 700;
      font-size: 0.85rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: background-color .2s ease, border-color .2s ease, transform .15s ease, opacity .2s ease;
    }
    .action-btn:hover {
      transform: translateY(-1px);
      background: rgba(126, 92, 255, 0.14);
      border-color: var(--input-focus);
    }
    .action-btn[disabled] { opacity: .6; cursor: not-allowed; transform: none; }

    .comment-body {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 0.98rem;
    }

    .edit-area {
      display: grid;
      gap: 8px;
      margin-top: 6px;
    }
    .edit-area textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text);
      font: inherit;
      min-height: 80px;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .edit-area textarea:focus {
      border-color: var(--input-focus);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--input-focus) 25%, transparent);
    }
    .edit-actions { display: inline-flex; gap: 8px; flex-wrap: wrap; }
    .save-btn { background: rgba(97,62,255,0.12); }
    .cancel-btn { background: rgba(0,0,0,0.06); }

    hr.sep {
      border: none;
      height: 1px;
      margin: 24px auto;
      max-width: 460px;
      background: linear-gradient(90deg, transparent, var(--hr-color), transparent);
    }
    footer {
      margin-top: 32px;
      padding: 24px 0 16px;
      text-align: center;
    }
    footer p { margin: 0 0 12px; font-weight: 600; }

    .video {
      position: relative;
      width: min(100%, 860px);
      margin: 0 auto 16px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid var(--video-border);
      box-shadow: var(--video-shadow);
      background: var(--video-bg);
    }
    .video::before { content: ""; display: block; padding-top: 56.25%; }
    .video iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

    .socials { margin-top: 24px; }

    .theme-toggle {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 100;
      padding: 10px 14px;
      border-radius: 999px;
      background: var(--btn-bg);
      border: 1px solid var(--btn-border);
      color: var(--accent-strong);
      font-weight: 700;
      box-shadow: var(--btn-shadow);
      cursor: pointer;
      transition: transform .15s ease,
                  background-color .2s ease,
                  box-shadow .2s ease,
                  border-color .2s ease,
                  color .2s ease;
    }
    .theme-toggle:hover {
      transform: translateY(-1px);
      background: var(--btn-bg-hover);
      border-color: var(--btn-border-hover);
      box-shadow: var(--btn-shadow-hover);
    }
    .theme-toggle:focus-visible {
      outline: 2px solid var(--accent-strong);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <!-- LatajÄ…ce czarne serca (pod treÅ›ciÄ…) -->
  <div class="bg-hearts" aria-hidden="true">
    <!-- (zestaw serc â€” jak w poprzedniej wersji, zachowany) -->
    <!-- Dla czytelnoÅ›ci: ten blok zawiera wiele <svg> serc o rÃ³Å¼nych parametrach -->
    <!-- MoÅ¼esz pozostawiÄ‡ bez zmian; serca sÄ… pod treÅ›ciÄ… i nie przeszkadzajÄ… w UI -->
    <!-- POCZÄ„TEK SERCA -->
    <svg viewBox="0 0 24 24" style="--x: 6%;  --size: 28px; --scale: 1;    --dur: 24s; --delay: -2s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 12%; --size: 36px; --scale: 1.1; --dur: 30s; --delay: -10s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 18%; --size: 44px; --scale: .9;  --dur: 38s; --delay: -18s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 24%; --size: 26px; --scale: .8;  --dur: 22s; --delay: -6s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 30%; --size: 40px; --scale: 1.2; --dur: 44s; --delay: -4s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 36%; --size: 22px; --scale: .9;  --dur: 20s; --delay: -26s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 42%; --size: 34px; --scale: 1;   --dur: 32s; --delay: -14s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 48%; --size: 48px; --scale: 1.1; --dur: 46s; --delay: -8s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 54%; --size: 24px; --scale: .85; --dur: 24s; --delay: -20s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 60%; --size: 30px; --scale: 1;   --dur: 28s; --delay: -6s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 66%; --size: 42px; --scale: 1.08;--dur: 40s; --delay: -12s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 72%; --size: 26px; --scale: .9;  --dur: 22s; --delay: -28s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 78%; --size: 38px; --scale: 1.02;--dur: 34s; --delay: -16s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 84%; --size: 24px; --scale: .8;  --dur: 24s; --delay: -4s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 90%; --size: 46px; --scale: 1.15;--dur: 42s; --delay: -22s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <!-- Dodatkowe (zagÄ™szczenie) -->
    <svg viewBox="0 0 24 24" style="--x: 3%;  --size: 32px; --scale: .95; --dur: 26s; --delay: -9s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 96%; --size: 28px; --scale: .9;  --dur: 28s; --delay: -30s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>

    <!-- ~+30% (wczeÅ›niej dodane) -->
    <svg viewBox="0 0 24 24" style="--x: 9%;  --size: 30px; --scale: .95; --dur: 26s; --delay: -7s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 27%; --size: 35px; --scale: 1.05; --dur: 33s; --delay: -15s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 39%; --size: 25px; --scale: .85; --dur: 21s; --delay: -19s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 57%; --size: 33px; --scale: 1;    --dur: 29s; --delay: -11s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 75%; --size: 41px; --scale: 1.12; --dur: 41s; --delay: -3s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>

    <!-- ~+20% (5 szt.) -->
    <svg viewBox="0 0 24 24" style="--x: 15%; --size: 29px; --scale: .9;  --dur: 25s; --delay: -5s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 33%; --size: 37px; --scale: 1.05;--dur: 36s; --delay: -9s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 51%; --size: 31px; --scale: 1;   --dur: 27s; --delay: -13s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 69%; --size: 43px; --scale: 1.1; --dur: 39s; --delay: -21s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <svg viewBox="0 0 24 24" style="--x: 87%; --size: 27px; --scale: .85; --dur: 23s; --delay: -17s;"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6.5 3.5 5 5.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
    <!-- KONIEC SERCA -->
  </div>

  <!-- PrzeÅ‚Ä…cznik motywu -->
  <button id="themeToggle" class="theme-toggle" type="button" aria-label="PrzeÅ‚Ä…cz na ciemny motyw" aria-pressed="false">ğŸŒ™ Ciemny</button>

  <div class="container">
    <header>
      <h1>ğ“¦ğ“˜ğ“£ğ“ğ“œğ“¨ ğ“¦ ğ“¡ğ“ğ““ğ“©ğ“˜ğ“ğ“’ğ“” ğ“•ğ“¤ğ“¡ğ“ğ“¢ğ“šğ“ ğ“¥ğ“”ğ“§ğ“</h1>

      <p class="fancy-intro">ğ“­ğ”ƒğ“²Ä™ğ“´ğ“¾ğ“³ğ“® Å¼ğ“® ğ”ƒğ“ªğ“³ğ“»ğ”ƒğ“ªÅ‚ğ“®Å› ğ“·ğ“ª  ğ“¶ğ“¸ğ“³Ä…ğ“¼ğ“½ğ“»ğ“¸ğ“·ğ“®, ğ“»ğ“¸ğ”ƒğ“°ğ“¸Å›Ä‡ ğ“¼ğ“²ğ“® ğ“²  ğ“¹ğ“¸ğ“¹ğ“ªğ“½ğ“»ğ”ƒ ğ“¬ğ“¸  ğ“½ğ“¾ğ“½ğ“ªğ”‚ ğ“³ğ“®ğ“¼ğ“½ ğ“¬ğ“²ğ“®ğ“´ğ“ªğ”€ğ“®ğ“°ğ“¸, ğ“¶ğ“²Å‚ğ“®ğ“°ğ“¸ ğ“¹ğ“»ğ”ƒğ“®ğ“°ğ“µÄ…ğ“­ğ“ªğ“·ğ“²ğ“ª ^^</p>

      <div class="video hero-video">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/pos632jmaNE?si=DGikv9cLFB1caLDC" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>

      <div class="subtitle">MiÅ‚o, Å¼e wpadÅ‚eÅ›/aÅ›! RozgoÅ›Ä‡ siÄ™ â˜ºï¸</div>
    </header>

    <main>
      <section class="card content">
        <p>witam na stronie internetowej vexa, tutaj znajdziesz coÅ› dla siebie i nie tylko, bÄ™dziesz mÃ³gÅ‚ tutaj sie poczuÄ‡ jak u siebie, jeÅ›li podoba ci sie moja twÃ³rczoÅ›Ä‡ wesprzyj mnie dotacjÄ… tutaj</p>
        <p>
          <a class="btn" href="https://tipply.pl/@VexTV" target="_blank" rel="noopener">â¤ï¸ Wesprzyj mnie na Tipply</a>
        </p>

        <div class="info">
          <p>ChciaÅ‚bym, Å¼ebyÅ›cie czuli siÄ™ tutaj jak u siebie w domu ğŸ  Dlatego zapraszam Was na mÃ³j kanaÅ‚ na YouTube â€” znajdziecie go na samym dole strony.</p>
          <p>ChcÄ™ razem z Wami tworzyÄ‡ spoÅ‚ecznoÅ›Ä‡, na ktÃ³rej bardzo mi zaleÅ¼y, i byÄ‡ dla Was jak najlepszy â¤ï¸</p>
          <p>Tutaj bÄ™dÄ™ na bieÅ¼Ä…co dodawaÅ‚ potrzebne informacje, aktualizowane co jakiÅ› czas.</p>
        </div>
      </section>

      <!-- Dodatkowa ramka z informacjami, ikonami i celem subÃ³w -->
      <section class="card updates" aria-labelledby="updates-title">
        <h2 id="updates-title">Aktualne informacje</h2>

        <!-- Ustawione: 2/1000 -->
        <div class="goal" data-current="2" data-goal="1000" role="group" aria-label="Cel subskrypcji 1000">
          <div class="row">
            <span class="icon youtube" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path fill="currentColor" d="M23.5 6.2a4 4 0 0 0-2.8-2.8C18.7 3 12 3 12 3s-6.7 0-8.7.4A4 4 0 0 0 .5 6.2 41.4 41.4 0 0 0 .1 12a41.4 41.4 0 0 0 .4 5.8 4  4 0 0 0 2.8 2.8C5.3 21 12 21 12 21s6.7 0 8.7-.4a4 4 0 0 0 2.8-2.8c.3-1.9.4-5.8.4-5.8s0-3.9-.4-5.8zM9.8 15.5V8.5l6.4 3.5-6.4 3.5z"/></svg>
            </span>
            <span class="label">Cel subskrypcji â€” <strong>1000</strong></span>
            <span class="value" aria-live="polite">2 / 1000</span>
          </div>
          <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="1000" aria-valuenow="2">
            <span class="bar"></span>
          </div>
        </div>

        <ul class="list" role="list">
          <li class="item">
            <span class="icon discord" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20.317 4.369A19.791 19.791 0 0016.558 3c-.207.363-.444.84-.608 1.215a17.456 17.456 0 00-5.9 0C9.888 3.84 9.65 3.363 9.443 3a19.736 19.736 0 00-3.76 1.37C2.256 9.099 1.385 13.63 1.742 18.108A19.8 19.8 0 007.58 21c.3-.41.565-.847.79-1.305a12.91 12.91 0 01-1.247-.592l.302-.237a14.2 14.2 0 009.13 0l.304.237c-.41 .2-.83 .41-1.25 .59.23 .46 .49 .9 .79 1.31a19.76 19.76 0 005.84-2.89c.47-5.54-.8-10.02-2.87-13.74zM9.347 15.5c-1.1 0-2.002-1.01-2.002-2.255 0-1.245.89-2.255 2.002-2.255 1.123 0 2.015 1.01 2.015 2.255 0 1.245-.902 2.255-2.015 2.255zm5.306 0c-1.1 0-2.003-1.01-2.003-2.255 0-1.245.89-2.255 2.003-2.255 1.122 0 2.015 1.01 2.015 2.255 0 1.245-.893 2.255-2.015 2.255z"/></svg>
            </span>
            <span>Serwer Discord powstanie za niedÅ‚ugo</span>
          </li>
          <li class="item">
            <span class="icon instagram" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm10 2H7a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3zm-5 3a5 5 0 110 10 5 5 0 010-10zm0 2.2a2.8 2.8 0 100 5.6 2.8 2.8 0 000-5.6zM18 6.5a1.1 1.1 0 110 2.2 1.1 1.1 0 010-2.2z"/></svg>
            </span>
            <span>Instagram Furaska â€” za niedÅ‚ugo</span>
          </li>
          <li class="item">
            <span class="icon info" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a10 10 0 110 20 10 10 0 010-20zm1 5h-2v2h2V7zm0 4h-2v7h2v-7z"/></svg>
            </span>
            <span>Wszystkie informacje bÄ™dÄ… na bieÅ¼Ä…co aktualizowane</span>
          </li>
        </ul>
      </section>

      <hr class="sep" />

      <footer>
        <div class="socials">
          <p>Znajdziesz mnie teÅ¼ tutaj:</p>
          <p>
            <a class="btn social-btn btn--youtube"
               href="https://youtube.com/@vextv-f8b?si=MYVJGZAAMCjPPIl4"
               target="_blank" rel="noopener"
               aria-label="Subskrybuj kanaÅ‚ VexTV na YouTube">
              <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M23.5 6.2a4 4 0 0 0-2.8-2.8C18.7 3 12 3 12 3s-6.7 0-8.7.4A4 4 0 0 0 .5 6.2 41.4 41.4 0 0 0 .1 12a41.4 41.4 0 0 0 .4 5.8 4  4 0 0 0 2.8 2.8C5.3 21 12 21 12 21s6.7 0 8.7-.4a4 4 0 0 0 2.8-2.8c.3-1.9.4-5.8.4-5.8s0-3.9-.4-5.8zM9.8 15.5V8.5l6.4 3.5-6.4 3.5z"/>
              </svg>
              Subskrybuj na YouTube
            </a>
          </p>
        </div>
      </footer>

      <!-- PANEL KOMENTARZY -->
      <section class="card comments" aria-labelledby="comments-title">
        <h2 id="comments-title">Komentarze</h2>
        <p class="helper">Dodaj komentarz bez logowania. Komentarze zapisujÄ… siÄ™ lokalnie w Twojej przeglÄ…darce. MoÅ¼esz edytowaÄ‡ (przez 15 minut) i usuwaÄ‡ swoje. Cooldown: 3 godziny.</p>

        <form id="commentForm" class="comments-form" novalidate>
          <div class="row">
            <div class="field">
              <label for="nick">Nick</label>
              <input type="text" id="nick" name="nick" maxlength="24" placeholder="Wpisz swÃ³j nick" required>
            </div>

            <div class="field">
              <label for="comment">Komentarz</label>
              <textarea id="comment" name="comment" maxlength="10000" placeholder="Napisz coÅ› miÅ‚ego ğŸ˜Š" required></textarea>
              <div id="charCounter" class="counter">0 / 10 000</div>
            </div>
          </div>

          <button id="publishBtn" type="submit" class="btn">Opublikuj</button>
          <div id="commentMsg" class="comment-msg" aria-live="polite"></div>
        </form>

        <div class="comments-toolbar">
          <label for="sortSelect">Sortuj:</label>
          <select id="sortSelect" aria-label="Sortuj komentarze">
            <option value="desc">Najnowsze</option>
            <option value="asc">Najstarsze</option>
          </select>
        </div>

        <ul id="commentsList" class="comments-list" role="list"></ul>
      </section>
    </main>
  </div>

  <script>
    (function() {
      const storageKey = 'theme';

      const getStoredTheme = () => localStorage.getItem(storageKey);
      const prefersDark = () => window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

      function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        updateToggleButton(theme);
      }
      function setTheme(theme) {
        localStorage.setItem(storageKey, theme);
        applyTheme(theme);
      }
      function getInitialTheme() {
        const stored = getStoredTheme();
        if (stored === 'dark' || stored === 'light') return stored;
        return prefersDark() ? 'dark' : 'light';
      }
      function updateToggleButton(theme) {
        const btn = document.getElementById('themeToggle');
        if (!btn) return;
        if (theme === 'dark') {
          btn.innerHTML = 'â˜€ï¸ Jasny';
          btn.setAttribute('aria-label', 'PrzeÅ‚Ä…cz na jasny motyw');
          btn.setAttribute('aria-pressed', 'true');
        } else {
          btn.innerHTML = 'ğŸŒ™ Ciemny';
          btn.setAttribute('aria-label', 'PrzeÅ‚Ä…cz na ciemny motyw');
          btn.setAttribute('aria-pressed', 'false');
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        applyTheme(getInitialTheme());

        const btn = document.getElementById('themeToggle');
        btn.addEventListener('click', () => {
          const current = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
          const next = current === 'dark' ? 'light' : 'dark';
          setTheme(next);
        });

        // Pasek postÄ™pu subÃ³w
        (function() {
          const goal = document.querySelector('.updates .goal');
          if (!goal) return;
          const current = parseInt(goal.getAttribute('data-current'), 10) || 0;
          const target  = parseInt(goal.getAttribute('data-goal'), 10) || 1000;
          const pct = Math.max(0, Math.min(100, (current / target) * 100));
          const bar = goal.querySelector('.bar');
          const valueEl = goal.querySelector('.value');
          const progressEl = goal.querySelector('.progress');
          if (bar) bar.style.width = pct + '%';
          if (valueEl) valueEl.textContent = current + ' / ' + target;
          if (progressEl) {
            progressEl.setAttribute('aria-valuenow', current);
            progressEl.setAttribute('aria-valuemax', target);
          }
        })();

        // Komentarze (localStorage + usuwanie + edycja + cooldown + sort + licznik)
        const COMMENTS_KEY = 'vex_comments';
        const LAST_TS_KEY  = 'vex_comments_last_ts';
        const CID_KEY      = 'vex_cid';
        const SORT_KEY     = 'vex_comments_sort';
        const COOLDOWN_MS  = 3 * 60 * 60 * 1000; // 3h
        const EDIT_WINDOW_MS = 15 * 60 * 1000;   // 15 min
        const MAX_LEN = 10000;

        const form = document.getElementById('commentForm');
        const publishBtn = document.getElementById('publishBtn');
        const nickEl = document.getElementById('nick');
        const commentEl = document.getElementById('comment');
        const counterEl = document.getElementById('charCounter');
        const msgEl = document.getElementById('commentMsg');
        const listEl = document.getElementById('commentsList');
        const sortSelect = document.getElementById('sortSelect');

        function getClientId() {
          let cid = localStorage.getItem(CID_KEY);
          if (!cid) {
            cid = 'cid-' + Math.random().toString(36).slice(2,10) + '-' + Date.now().toString(36);
            try { localStorage.setItem(CID_KEY, cid); } catch(e) {}
          }
          return cid;
        }
        const clientId = getClientId();

        function loadComments() {
          try {
            const raw = localStorage.getItem(COMMENTS_KEY);
            return raw ? JSON.parse(raw) : [];
          } catch(e) {
            return [];
          }
        }
        function saveComments(arr) {
          try {
            localStorage.setItem(COMMENTS_KEY, JSON.stringify(arr));
          } catch(e) {}
        }
        function escapeHtml(str) {
          return str.replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
        }
        function uuid() {
          return Date.now().toString(36) + '-' + Math.random().toString(36).slice(2,8);
        }

        function initialsFromNick(nick) {
          const clean = (nick || '').trim();
          if (!clean) return '?';
          const parts = clean.split(/\s+/).filter(Boolean);
          if (parts.length >= 2) return (parts[0][0] + parts[1][0]).toUpperCase();
          return clean.slice(0,2).toUpperCase();
        }
        function colorFromNick(nick) {
          let h = 5381;
          for (let i=0;i<nick.length;i++) h = ((h << 5) + h) + nick.charCodeAt(i);
          h = Math.abs(h) % 360;
          return `hsl(${h} 70% 45%)`;
        }

        function getSort() {
          const v = localStorage.getItem(SORT_KEY);
          return v === 'asc' ? 'asc' : 'desc';
        }
        function setSort(v) {
          try { localStorage.setItem(SORT_KEY, v); } catch(e) {}
        }

        let editingId = null;

        function renderComments() {
          const order = sortSelect.value;
          const comments = loadComments().sort((a,b)=> order === 'asc' ? a.ts - b.ts : b.ts - a.ts);
          listEl.innerHTML = '';
          if (comments.length === 0) return;

          const now = Date.now();

          for (const c of comments) {
            const li = document.createElement('li');
            li.className = 'comment';
            li.dataset.id = c.id || '';
            const when = new Date(c.ts);
            const dateText = when.toLocaleString(undefined, { year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit' });
            const isOwner = c.clientId && c.clientId === clientId;
            const canEdit = isOwner && (now - c.ts) <= EDIT_WINDOW_MS;

            const head = document.createElement('div');
            head.className = 'comment-head';

            const left = document.createElement('div');
            left.className = 'left-head';
            const ava = document.createElement('div');
            ava.className = 'avatar';
            ava.textContent = initialsFromNick(c.nick || '');
            ava.style.backgroundColor = colorFromNick(c.nick || 'vex');
            const meta = document.createElement('div');
            meta.className = 'meta';
            const nickSpan = document.createElement('span');
            nickSpan.className = 'nick';
            nickSpan.textContent = c.nick;
            const timeEl = document.createElement('time');
            timeEl.setAttribute('datetime', when.toISOString());
            timeEl.textContent = dateText;
            meta.appendChild(nickSpan);
            meta.appendChild(timeEl);
            if (c.edited) {
              const badge = document.createElement('span');
              badge.className = 'badge-edited';
              badge.textContent = 'edytowano';
              meta.appendChild(badge);
            }
            left.appendChild(ava);
            left.appendChild(meta);

            const actions = document.createElement('div');
            actions.className = 'comment-actions';
            if (isOwner) {
              if (canEdit) {
                const editBtn = document.createElement('button');
                editBtn.type = 'button';
                editBtn.className = 'action-btn edit-btn';
                editBtn.dataset.id = c.id;
                editBtn.textContent = 'âœï¸ Edytuj';
                actions.appendChild(editBtn);
              }
              const delBtn = document.createElement('button');
              delBtn.type = 'button';
              delBtn.className = 'action-btn delete-btn';
              delBtn.dataset.id = c.id;
              delBtn.textContent = 'ğŸ—‘ï¸ UsuÅ„';
              actions.appendChild(delBtn);
            }

            head.appendChild(left);
            head.appendChild(actions);

            const body = document.createElement('div');
            body.className = 'comment-body';
            body.textContent = c.text;

            li.appendChild(head);
            li.appendChild(body);
            listEl.appendChild(li);
          }
        }

        function setMsg(text, ok=false) {
          if (!msgEl) return;
          msgEl.textContent = text || '';
          msgEl.style.color = ok ? 'var(--accent-strong)' : 'var(--muted)';
        }

        function getLastTs() {
          const v = parseInt(localStorage.getItem(LAST_TS_KEY) || '0', 10);
          return isNaN(v) ? 0 : v;
        }
        function setLastTs(ts) {
          try { localStorage.setItem(LAST_TS_KEY, String(ts)); } catch(e) {}
        }

        function msToHHMM(ms) {
          const totalSec = Math.max(0, Math.ceil(ms/1000));
          const h = Math.floor(totalSec/3600);
          const m = Math.floor((totalSec%3600)/60);
          const s = totalSec%60;
          const hh = h.toString();
          const mm = m.toString().padStart(2,'0');
          const ss = s.toString().padStart(2,'0');
          return {h, m, s, text: (h>0 ? `${hh}h ${mm}m` : `${mm}m ${ss}s`)};
        }

        function updateCooldownUI() {
          const last = getLastTs();
          const now = Date.now();
          const left = last + COOLDOWN_MS - now;
          if (left > 0) {
            publishBtn.disabled = true;
            const t = msToHHMM(left);
            setMsg(`Cooldown: moÅ¼esz dodaÄ‡ kolejny komentarz za ${t.text}.`);
          } else {
            publishBtn.disabled = false;
            if (!editingId) setMsg('');
          }
        }

        // licznik znakÃ³w
        function updateCounter() {
          const len = (commentEl.value || '').length;
          if (counterEl) counterEl.textContent = `${len.toLocaleString()} / 10 000`;
        }
        commentEl.addEventListener('input', updateCounter);

        // InterwaÅ‚ cooldownu
        updateCooldownUI();
        const cdTimer = setInterval(updateCooldownUI, 1000 * 30);

        // Inicjalizacja sortowania
        sortSelect.value = getSort();
        sortSelect.addEventListener('change', () => {
          setSort(sortSelect.value);
          renderComments();
        });

        // Delegacja: usuwanie + edycja
        listEl.addEventListener('click', (e) => {
          const delBtn = e.target.closest('.delete-btn');
          const editBtn = e.target.closest('.edit-btn');
          const saveBtn = e.target.closest('.save-btn');
          const cancelBtn = e.target.closest('.cancel-btn');

          if (delBtn) {
            const id = delBtn.getAttribute('data-id');
            if (!id) return;
            const comments = loadComments();
            const item = comments.find(c => c.id === id);
            if (!item || item.clientId !== clientId) return;
            if (!confirm('Na pewno usunÄ…Ä‡ ten komentarz?')) return;
            saveComments(comments.filter(c => c.id !== id));
            renderComments();
            setMsg('UsuniÄ™to komentarz.', true);
            return;
          }

          if (editBtn) {
            const id = editBtn.getAttribute('data-id');
            if (!id) return;
            const comments = loadComments();
            const item = comments.find(c => c.id === id);
            if (!item || item.clientId !== clientId) return;
            // sprawdÅº okno 15 min
            if (Date.now() - item.ts > EDIT_WINDOW_MS) {
              setMsg('Edycja moÅ¼liwa tylko przez 15 minut od publikacji.');
              renderComments();
              return;
            }
            if (editingId && editingId !== id) renderComments();
            editingId = id;

            const li = listEl.querySelector(`.comment[data-id="${id}"]`);
            if (!li) return;
            const body = li.querySelector('.comment-body');
            const actions = li.querySelector('.comment-actions');
            if (body) {
              const currentText = body.textContent || '';
              body.innerHTML = `
                <div class="edit-area">
                  <textarea class="edit-textarea" maxlength="10000">${currentText.replace(/</g,'&lt;')}</textarea>
                  <div class="edit-actions">
                    <button type="button" class="action-btn save-btn" data-id="${id}">ğŸ’¾ Zapisz</button>
                    <button type="button" class="action-btn cancel-btn" data-id="${id}">âœ–ï¸ Anuluj</button>
                    <span class="helper" style="color:var(--muted);font-size:.9rem;">SkrÃ³t: Ctrl+Enter = Zapisz</span>
                  </div>
                </div>
              `;
              if (actions) {
                const eb = actions.querySelector('.edit-btn');
                if (eb) eb.setAttribute('disabled','true');
              }
              const ta = li.querySelector('.edit-textarea');
              if (ta) {
                ta.focus();
                ta.addEventListener('keydown', (ke) => {
                  if ((ke.ctrlKey || ke.metaKey) && ke.key === 'Enter') {
                    const saveB = li.querySelector('.save-btn');
                    if (saveB) saveB.click();
                  }
                });
              }
              setMsg('Edytujesz komentarz â€” zapisz lub anuluj.');
            }
            return;
          }

          if (saveBtn) {
            const id = saveBtn.getAttribute('data-id');
            const comments = loadComments();
            const idx = comments.findIndex(c => c.id === id);
            if (idx === -1) return;
            if (comments[idx].clientId !== clientId) return;
            // sprawdÅº okno 15 min
            if (Date.now() - comments[idx].ts > EDIT_WINDOW_MS) {
              editingId = null;
              setMsg('MinÄ™Å‚o 15 minut â€” edycja niedostÄ™pna.');
              renderComments();
              return;
            }
            const li = listEl.querySelector(`.comment[data-id="${id}"]`);
            const ta = li ? li.querySelector('.edit-textarea') : null;
            if (!ta) return;
            const newText = (ta.value || '').trim();
            if (newText.length < 3) { setMsg('Komentarz powinien mieÄ‡ min. 3 znaki.'); ta.focus(); return; }
            if (newText.length > MAX_LEN) { setMsg('Za dÅ‚ugi komentarz.'); ta.focus(); return; }

            comments[idx].text = newText;
            comments[idx].edited = true;
            comments[idx].editedTs = Date.now();
            saveComments(comments);
            editingId = null;
            renderComments();
            setMsg('Zaktualizowano komentarz âœ…', true);
            return;
          }

          if (cancelBtn) {
            editingId = null;
            renderComments();
            setMsg('');
            return;
          }
        });

        // Dodawanie komentarza
        form.addEventListener('submit', (e) => {
          e.preventDefault();

          const last = getLastTs();
          const now = Date.now();
          const left = last + COOLDOWN_MS - now;
          if (left > 0) {
            const t = msToHHMM(left);
            setMsg(`Cooldown: moÅ¼esz dodaÄ‡ kolejny komentarz za ${t.text}.`);
            return;
          }

          const nick = (nickEl.value || '').trim();
          const text = (commentEl.value || '').trim();

          if (nick.length < 2) { setMsg('Nick powinien mieÄ‡ min. 2 znaki.'); nickEl.focus(); return; }
          if (text.length < 3) { setMsg('Komentarz powinien mieÄ‡ min. 3 znaki.'); commentEl.focus(); return; }
          if (text.length > MAX_LEN) { setMsg('Za dÅ‚ugi komentarz.'); commentEl.focus(); return; }

          const comments = loadComments();
          comments.push({ id: uuid(), clientId, nick, text, ts: now });
          saveComments(comments);
          setLastTs(now);
          renderComments();
          form.reset();
          updateCounter();
          setMsg('Opublikowano! ğŸ’¬', true);
          updateCooldownUI();
        });

        // start
        updateCounter();
        renderComments();

        // Reaguj na zmianÄ™ preferencji systemowych, jeÅ›li brak wÅ‚asnego wyboru
        if (window.matchMedia) {
          const media = window.matchMedia('(prefers-color-scheme: dark)');
          if (media.addEventListener) {
            media.addEventListener('change', (e) => {
              if (!localStorage.getItem(storageKey)) {
                applyTheme(e.matches ? 'dark' : 'light');
              }
            });
          }
        }
      });
    })();
  </script>
</body>
</html>
